{
  "builders":
  [
    {
      "type": "qemu",
      "iso_url": "http://ftp.freebsd.org/pub/FreeBSD/releases/ISO-IMAGES/10.0/FreeBSD-10.0-RELEASE-amd64-disc1.iso",
      "iso_checksum": "fd25619fa0d69c29bea8347b1070ac75",
      "iso_checksum_type": "md5",
      "output_directory": "output_freebsd10",
      "ssh_wait_timeout": "30s",
      "shutdown_command": "halt -p",
      "disk_size": 20480,
      "format": "qcow2",
      "headless": true,
      "accelerator": "kvm",
      "qemuargs":
      [ 
        [ "-smp" , "2"]
      ],
      "http_directory": "httpdir",
      "http_port_min": 10082,
      "http_port_max": 10089,
      "ssh_host_port_min": 2222,
      "ssh_host_port_max": 2229,
      "ssh_username": "root",
      "ssh_password": "installer",
      "ssh_port": 22,
      "ssh_wait_timeout": "90m",
      "vm_name": "freebsd10",
      "net_device": "virtio-net",
      "disk_interface": "virtio",
      "boot_command":
      [
        "<enter>",
        "<wait10><wait5>",
        "s",
        "mkdir -p /tmp/bsdinstall_etc<enter>",
        "dhclient vtnet0<enter>",
        "<wait5>",
        "fetch -o /tmp/install.sh http://{{ .HTTPIP }}:{{ .HTTPPort }}/install.sh<enter>",
        "<wait>",
        "bsdinstall script /tmp/install.sh<enter>",
        "<wait10><wait10><wait10><wait10><wait10><wait10>",
        "reboot<enter>"      ]
    }
  ],
  "provisioners":
  [
        {
            "type": "file",
            "source": "../../files/cloud-set-guest-password-freebsd",
            "destination": "/usr/local/etc/rc.d/cloud-set-guest-password"
        },
        {
            "type": "file",
            "source": "../../files/cloud-set-guest-sshkey-freebsd",
            "destination": "/usr/local/etc/rc.d/cloud-set-guest-sshkey"
        },
        {
            "type": "shell",
            "scripts": [
                "scripts/base.sh",
                "scripts/cleanup.sh"
            ],
            "execute_command": "bash '{{.Path}}'"
        }
  ]
}
